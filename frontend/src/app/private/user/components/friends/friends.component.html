<app-nav-bar></app-nav-bar>
<div class="container" (click)="closeContextMenu()">
  <div class="search">
    <div class="title">
      <h1>Chercher</h1>
      <img src="../../../../../assets/images/icons8-telescope-100_1.png" alt="icons8-telescope-100_1">
    </div>
    <hr>
    <input type="text" [(ngModel)]="searchTerm"  (ngModelChange)="searchUsers()" placeholder="Rechercher des utilisateurs">
    <div class="main">
      <div class="suggestions" *ngIf="filteredUsers.length > 0">
        <ul>
          <li *ngFor="let user of filteredUsers" (contextmenu)="onContextMenu($event, user)">
            <img src="../../../../../../assets/images/astronaut.png" alt="Photo de profil de {{user.username}}" >
            {{user.username}}
          </li>
        </ul>
      </div>
    </div>
  </div>
  <div class="friend-list">
    <div class="title">
      <h1>Amis</h1>
      <img src="../../../../../assets/images/src.png" alt="amis-logo">
    </div>
    <hr>
    <p *ngIf="message">{{message}}</p>
    <div class="main">
      <ul>
        <li *ngFor="let friend of friends" (contextmenu)="onContextMenu($event, friend)" >
          <img src="../../../../../../assets/images/astronaut.png">
          {{ friend.username }}
        </li>
        </ul>
    </div>
  </div>
</div>

<div *ngIf="showContextMenu" class="context-menu" [style.top.px]="contextMenuTop" [style.left.px]="contextMenuLeft">
  <button (click)="addFriend(this.user.id, selectedUser)">add friend</button>
  <button (click)="sendMessage(selectedUser)" >send message</button>
  <button (click)="removeFriend(this.user.id, selectedUser)">delete friend</button>
  <button (click)="goToProfileOf(selectedUser)">Go to profil</button>
</div>